---
import Layout from "@/layouts/Layout.astro";
import type { blogPost } from "../index.astro";

export const fetchAllBlogPosts = async (): Promise<blogPost[]> => {
	return await fetch(
		`${import.meta.env.PUBLIC_WP_API}/blog?_embed&author=3&per_page=100`,
	).then((response) => response.json());
};

export async function getStaticPaths() {
	return (await fetchAllBlogPosts()).map((post) => {
		return {
			params: {
				slug: post.slug,
			},
			props: {
				post,
			},
		};
	});
}

const { post } = Astro.props;
---

<Layout>
  <section class="container grid items-center gap-6 pb-8 pt-6 md:py-10 mx-auto">
    <h1 class="text-2xl font-bold">{post.title.rendered}</h1>
    <a href="/blog" class="text-blue-500">
      一覧に戻る
    </a>
  </section>
</Layout>